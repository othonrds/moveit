<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Rajdhani:wght@600&display=swap"
    rel="stylesheet">
  <script src="https://kaboomjs.com/lib/0.2.0/kaboom.js"></script>

  <title>Jogo do Othim</title>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>

  <div id="root"></div>

</body>

<script type="module">

  kaboom.global();

  loadSprite("player", "./img/player.png");
  loadSprite("bg", "./img/bg1.png");
  loadSprite("coin", "./img/coin.png");
  loadSprite("steel", "./img/steel.png");

  init({
    fullscreen: true,
    scale: 1,
    clearColor: rgb(255, 255, 255), // background color (default black)
  });

  scene("main", () => {

    // define some constants
    const JUMP_FORCE = 320;
    const MOVE_SPEED = 200;
    const FALL_DEATH = 640;

    const bg = add([
      sprite("bg"),

    ]);

    const level = addLevel([
      "                       ",
      "                       ",
      "                       ",
      "                       ",
      "              #        ",
      "========= =============",
    ], {
      // TODO: derive grid size from sprite size instead of hardcode
      // grid size
      width: 100,
      height: 110,
      // define each object as a list of components
      "=": [
        sprite("steel"),
        solid(),
      ],
      "#": [
        sprite("coin"),
        "coin",
        body(),
      ],
    });


    const player = add([
      sprite("player"),
      pos(100, 100),
      body(),

    ]);

    // jump with space
    keyPress("space", () => {
      // these 2 functions are provided by body() component
      if (player.grounded()) {
        player.jump(JUMP_FORCE);
      }
    });

    keyDown("left", () => {
      player.move(-MOVE_SPEED, 0);
    });

    keyDown("right", () => {
      player.move(MOVE_SPEED, 0);
    });

  });


  start("main");
</script>

</html>